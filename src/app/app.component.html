<main class="surface-100 min-h-screen flex align-items-center justify-content-center">
  <div class="surface-card border-round-xl shadow-4 p-4 flex gap-4 square-viewport">

    <!-- Backlog -------------------------------------------------------->
    <section class="flex flex-column gap-3 w-3">
      <span class="p-inputgroup flex align-items-center w-full min-w-0">
        <input
          pInputText
          class="flex-1 min-w-0 mr-3"
          placeholder="Add task and hit Enter"
          [(ngModel)]="newItem"
          (keyup.enter)="addItem()"
        />
        <button
          pButton
          type="button"
          icon="pi pi-plus"
          [label]="''"
          (click)="addItem()"
        ></button>
      </span>

      <p-panel header="Backlog" class="flex-1 overflow-auto">
        <div
          pDroppable
          class="flex flex-column gap-2"
          (onDrop)="dropIntoBacklog()"
        >
          <div
            *ngFor="let t of backlogItems"
            pDraggable
            (onDragStart)="dragStart({ task: t, from: null })"
            (onDragEnd)="dragEnd()"
            class="task-card"
          >
            <i class="pi pi-bars mr-2 text-500"></i>{{ t }}
          </div>
        </div>
      </p-panel>
    </section>

    <!-- Priorities ---------------------------------------------------->
    <section class="flex-1 priorities-grid">
      <ng-container *ngFor="let col of priorities; let i = index">
        <p-panel header="Priority {{ i + 1 }}" class="flex flex-column" [style]="{ height: '100%' }">
          <div
            pDroppable
            class="flex flex-column gap-2"
            (onDrop)="dropIntoPriority(i)"
          >
            <div
              *ngFor="let t of priorities[i]"
              pDraggable
              (onDragStart)="dragStart({ task: t, from: i })"
              (onDragEnd)="dragEnd()"
              class="task-card"
            >
              <i class="pi pi-bars mr-2 text-500"></i>{{ t }}
            </div>
          </div>
        </p-panel>
      </ng-container>
    </section>
  </div>
</main>
